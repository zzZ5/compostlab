(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10164310"],{"1e9d":function(t,e,i){},"2ef4":function(t,e,i){},"32e7":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("experiment-detail")},a=[],s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"experimentDetail-container"},[i("sticky",{attrs:{"z-index":10,"class-name":"sub-navbar draft"}},[i("el-button",{staticStyle:{"margin-left":"10px"},style:{display:t.display.operateHeader},attrs:{type:"success"},on:{click:function(e){return t.handleSelect("selectAll")}}},[t._v(" Select All ")]),i("el-button",{staticStyle:{"margin-left":"10px"},style:{display:t.display.operateHeader},attrs:{type:"primary"},on:{click:function(e){return t.handleSelect("confirm")}}},[t._v(" Confirm ")]),i("el-button",{staticStyle:{"margin-left":"10px"},style:{display:t.display.operateHeader},on:{click:function(e){return t.handleSelect("cancel")}}},[t._v(" Cancel ")]),i("el-button",{staticStyle:{"margin-left":"10px"},style:{display:t.display.mainHeader},attrs:{type:"primary"},on:{click:t.handleOperate}},[t._v(" Operate ")]),i("el-button",{staticStyle:{"margin-left":"10px"},style:{display:t.display.mainHeader},on:{click:t.handleDraw}},[t._v(" Draw ")])],1),i("div",{directives:[{name:"loading",rawName:"v-loading"}],staticClass:"experimentDetail-main-container"},[i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"margin-top":"50px"},attrs:{gutter:20}},t._l(t.list,(function(e){return i("el-col",{key:e.id,staticStyle:{"min-width":"200px"},attrs:{span:6}},[i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("el-checkbox",{style:{display:t.display.checkbox},attrs:{label:e.id},model:{value:t.cmd.equipment,callback:function(e){t.$set(t.cmd,"equipment",e)},expression:"cmd.equipment"}},[i("span")]),i("router-link",{staticClass:"link-type",attrs:{to:{path:"/equipment/detail/"+e.id,query:{experimentId:t.experimentId,begin_time:t.begin_time,end_time:t.end_time}}}},[i("span",{staticClass:"link-type"},[i("b",[t._v(" "+t._s(e.name)+" ")])])]),i("el-dropdown",{staticStyle:{float:"right","padding-top":"0px"},attrs:{trigger:"click"},on:{command:t.handleCommand}},[i("span",{staticClass:"el-dropdown-link"},[i("el-button",{staticStyle:{float:"right",padding:"3px 5px"},attrs:{plain:"",type:"text",icon:"el-icon-more"}})],1),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:{command:"chart",equipmentId:e.id,begin_time:t.begin_time,end_time:t.end_time}}},[t._v("Chart")]),i("el-dropdown-item",{attrs:{command:{command:"cmd",cmd:"reset",equipmentId:e.id}}},[t._v("Reset")]),i("el-dropdown-item",[i("el-dropdown",{attrs:{trigger:"hover",placement:"right-start"},on:{command:t.handleCommand}},[i("span",{staticClass:"el-dropdown-link"},[t._v(" Heater"),i("i",{staticClass:"el-icon-arrow-right el-icon--right"})]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:{command:"heater",heater:"on",equipmentId:e.id}}},[t._v("On")]),i("el-dropdown-item",{attrs:{command:{command:"heater",heater:"off",equipmentId:e.id}}},[t._v("Off")])],1)],1)],1)],1)],1),i("small",{staticStyle:{"padding-left":"5px"}},[t._v("("+t._s(e.abbreviation)+")")]),i("el-tag",{staticStyle:{"margin-left":"15px"},attrs:{size:"small"}},[t._v(" "+t._s(e.type)+" ")])],1),i("div",{staticClass:"text item"},[i("span",[t._v("Sensors:")]),t._l(e.sensor,(function(e){return i("div",{key:e.id},[i("div",{staticStyle:{margin:"6px 20px"}},[i("router-link",{staticClass:"link-type",attrs:{to:{path:"/sensor/detail/"+e.id,query:{experimentId:t.experimentId}}}},[i("span",{staticClass:"link-type"},[i("b",[t._v(" "+t._s(e.name)+" ")])])]),i("small",{staticStyle:{"padding-left":"5px"}},[t._v("("+t._s(e.abbreviation)+")")]),i("el-tag",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"}},[t._v(" "+t._s(e.type)+" ")])],1)])}))],2),i("el-divider"),i("small",[t._v(" "+t._s(e.descript)+" ")])],1)],1)})),1)],1),i("el-dialog",{attrs:{title:"Command",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("json-editor",{ref:"jsonEditor",model:{value:t.cmd,callback:function(e){t.cmd=e},expression:"cmd"}}),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v(" Cancel ")]),i("el-button",{attrs:{type:"primary"},on:{click:t.confirmCmd}},[t._v(" Confirm ")])],1)],1)],1)},r=[],o=(i("99af"),i("d81d"),i("b64b"),i("a573"),i("b804")),d=i("c114"),l=i("fa7e"),c=i("f564"),u={name:"ExperimentDetail",components:{Sticky:o["a"],JsonEditor:l["a"]},data:function(){return{cmd:{equipment:[]},experimentId:"0",begin_time:"",operateHeader:"none",end_time:"",list:[],loading:!1,tempRoute:{},display:{checkbox:"none",mainHeader:"inline",operateHeader:"none"},dialogFormVisible:!1}},computed:{},created:function(){this.experimentId=this.$route.params&&this.$route.params.experimentId,this.fetchData(this.experimentId),this.tempRoute=Object.assign({},this.$route),this.setTagsViewTitle(),this.setPageTitle()},methods:{handleCommand:function(t){var e=this;if("chart"===t.command)this.$router.push({path:"/equipment/chart/"+t.equipmentId,query:{experimentId:this.experimentId,interval:[this.begin_time,this.end_time]}});else{var i={experiment:this.experimentId};"cmd"===t.command?i["cmd"]=t.cmd:"heater"===t.command&&(i["heater"]=t.heater),Object(c["e"])(t.equipmentId,i).then((function(t){e.$notify({message:t.message,type:"success",duration:2e3})}))}},handleSelect:function(t){"cancel"===t?(this.cmd.equipment=[],this.display.checkbox="none",this.display.mainHeader="inline",this.display.operateHeader="none"):"selectAll"===t?this.cmd.equipment=this.list.map((function(t){return t.id})):"confirm"===t&&(this.dialogFormVisible=!0)},confirmCmd:function(){var t=this;this.dialogFormVisible=!1,Object(d["d"])(this.experimentId,JSON.parse(this.cmd)).then((function(e){t.$notify({message:e.message,type:"success",duration:2e3})}))},handleOperate:function(){this.display.checkbox="inline",this.display.mainHeader="none",this.display.operateHeader="inline"},handleDraw:function(){this.$router.push({path:"/experiment/config/"+this.experimentId})},fetchData:function(t){var e=this;this.loading=!0,Object(d["b"])(t).then((function(t){e.list=t.data.equipment,e.begin_time=t.data.begin_time,e.end_time=t.data.end_time,e.loading=!1}))},setTagsViewTitle:function(){var t="Experiment Detail",e=Object.assign({},this.tempRoute,{title:"".concat(t," - ").concat(this.experimentId)});this.$store.dispatch("tagsView/updateVisitedView",e)},setPageTitle:function(){var t="Experiment Detail";document.title="".concat(t," - ").concat(this.experimentId)}}},m=u,p=(i("a268"),i("2877")),h=Object(p["a"])(m,s,r,!1,null,"d191ba1e",null),f=h.exports,g={name:"DetailExperiment",components:{ExperimentDetail:f}},v=g,y=Object(p["a"])(v,n,a,!1,null,null,null);e["default"]=y.exports},"7af3":function(t,e,i){"use strict";i("1e9d")},a268:function(t,e,i){"use strict";i("2ef4")},b804:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{style:{height:t.height+"px",zIndex:t.zIndex}},[i("div",{class:t.className,style:{top:t.isSticky?t.stickyTop+"px":"",zIndex:t.zIndex,position:t.position,width:t.width,height:t.height+"px"}},[t._t("default",[i("div",[t._v("sticky")])])],2)])},a=[],s=(i("a9e3"),i("2c3e"),{name:"Sticky",props:{stickyTop:{type:Number,default:0},zIndex:{type:Number,default:1},className:{type:String,default:""}},data:function(){return{active:!1,position:"",width:void 0,height:void 0,isSticky:!1}},mounted:function(){this.height=this.$el.getBoundingClientRect().height,window.addEventListener("scroll",this.handleScroll),window.addEventListener("resize",this.handleResize)},activated:function(){this.handleScroll()},destroyed:function(){window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("resize",this.handleResize)},methods:{sticky:function(){this.active||(this.position="fixed",this.active=!0,this.width=this.width+"px",this.isSticky=!0)},handleReset:function(){this.active&&this.reset()},reset:function(){this.position="",this.width="auto",this.active=!1,this.isSticky=!1},handleScroll:function(){var t=this.$el.getBoundingClientRect().width;this.width=t||"auto";var e=this.$el.getBoundingClientRect().top;e<this.stickyTop?this.sticky():this.handleReset()},handleResize:function(){this.isSticky&&(this.width=this.$el.getBoundingClientRect().width+"px")}}}),r=s,o=i("2877"),d=Object(o["a"])(r,n,a,!1,null,null,null);e["a"]=d.exports},c114:function(t,e,i){"use strict";i.d(e,"c",(function(){return a})),i.d(e,"b",(function(){return s})),i.d(e,"a",(function(){return r})),i.d(e,"f",(function(){return o})),i.d(e,"d",(function(){return d})),i.d(e,"e",(function(){return l}));var n=i("b775");function a(t){return Object(n["a"])({url:"/experiment/list/",method:"get",params:t})}function s(t){return Object(n["a"])({url:"/experiment/"+t+"/detail/",method:"get"})}function r(t){return Object(n["a"])({url:"/experiment/create/",method:"post",data:t})}function o(t,e){return Object(n["a"])({url:"/experiment/"+t+"/update/",method:"put",data:e})}function d(t,e){return Object(n["a"])({url:"/experiment/"+t+"/cmd/",method:"post",data:e})}function l(t,e){return Object(n["a"])({url:"/experiment/"+t+"/review/",method:"post",data:e})}},f564:function(t,e,i){"use strict";i.d(e,"d",(function(){return a})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return r})),i.d(e,"f",(function(){return o})),i.d(e,"e",(function(){return d})),i.d(e,"b",(function(){return l}));var n=i("b775");function a(t){return Object(n["a"])({url:"/equipment/list/",method:"get",params:t})}function s(t){return Object(n["a"])({url:"/equipment/"+t+"/detail/",method:"get"})}function r(t){return Object(n["a"])({url:"/equipment/create/",method:"post",data:t})}function o(t,e){return Object(n["a"])({url:"/equipment/"+t+"/update/",method:"put",data:e})}function d(t,e){return Object(n["a"])({url:"/equipment/"+t+"/cmd/",method:"post",data:e})}function l(t,e){return Object(n["a"])({url:"/equipment/"+t+"/data/",method:"get",params:e})}},fa7e:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"json-editor"},[i("textarea",{ref:"textarea"})])},a=[],s=(i("e9c4"),i("56b3")),r=i.n(s);i("0dd0"),i("a7be"),i("acdf"),i("f9d4"),i("8822"),i("d2de");i("ae67");var o={name:"JsonEditor",props:["value"],data:function(){return{jsonEditor:!1}},watch:{value:function(t){var e=this.jsonEditor.getValue();t!==e&&this.jsonEditor.setValue(JSON.stringify(this.value,null,2))}},mounted:function(){var t=this;this.jsonEditor=r.a.fromTextArea(this.$refs.textarea,{lineNumbers:!0,mode:"application/json",gutters:["CodeMirror-lint-markers"],theme:"rubyblue",lint:!0}),this.jsonEditor.setValue(JSON.stringify(this.value,null,2)),this.jsonEditor.on("change",(function(e){t.$emit("changed",e.getValue()),t.$emit("input",e.getValue())}))},methods:{getValue:function(){return this.jsonEditor.getValue()}}},d=o,l=(i("7af3"),i("2877")),c=Object(l["a"])(d,n,a,!1,null,"1958ddac",null);e["a"]=c.exports}}]);